"use strict";
/**
 * User-defined LLM guardrail for custom content moderation.
 *
 * This module provides a guardrail for implementing custom content checks using
 * Large Language Models (LLMs). It allows users to define their own system prompts
 * for content moderation, enabling flexible and domain-specific guardrail enforcement.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.userDefinedLLM = exports.UserDefinedOutput = exports.UserDefinedConfig = void 0;
const zod_1 = require("zod");
const llm_base_1 = require("./llm-base");
/**
 * Configuration schema for user-defined LLM moderation checks.
 *
 * Extends the base LLMConfig with a required field for custom prompt details.
 */
exports.UserDefinedConfig = llm_base_1.LLMConfig.omit({ system_prompt_details: true }).extend({
    /** Free-form instructions describing content moderation requirements */
    system_prompt_details: zod_1.z.string().describe('Free-form instructions describing content moderation requirements'),
});
/**
 * Output schema for user-defined LLM analysis.
 */
exports.UserDefinedOutput = llm_base_1.LLMOutput.extend({
    /** Optional reason for the flagging decision */
    reason: zod_1.z.string().optional(),
});
/**
 * System prompt template for user-defined content moderation.
 */
const SYSTEM_PROMPT = `# Instructions

{system_prompt_details}

Flag any content that matches the criteria defined above.`;
/**
 * User-defined LLM guardrail.
 *
 * Runs a user-defined guardrail based on a custom system prompt.
 * Allows for flexible content moderation based on specific requirements.
 */
exports.userDefinedLLM = (0, llm_base_1.createLLMCheckFn)('Custom Prompt Check', 'User-defined LLM guardrail for custom content moderation', SYSTEM_PROMPT, exports.UserDefinedOutput, exports.UserDefinedConfig);
//# sourceMappingURL=user-defined-llm.js.map