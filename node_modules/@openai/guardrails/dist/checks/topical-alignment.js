"use strict";
/**
 * Topical alignment guardrail module.
 *
 * This module provides a guardrail for ensuring content stays within a specified
 * business scope or topic domain. It uses an LLM to analyze text against a defined
 * context to detect off-topic or irrelevant content.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.topicalAlignment = exports.TopicalAlignmentOutput = exports.TopicalAlignmentConfig = void 0;
const zod_1 = require("zod");
const llm_base_1 = require("./llm-base");
/**
 * Configuration for topical alignment guardrail.
 *
 * Extends LLMConfig with a required business scope for content checks.
 */
exports.TopicalAlignmentConfig = llm_base_1.LLMConfig.omit({ system_prompt_details: true }).extend({
    /** Description of the allowed business scope or on-topic context */
    system_prompt_details: zod_1.z.string().describe('Description of the allowed business scope or on-topic context'),
});
/**
 * Output schema for topical alignment analysis.
 */
exports.TopicalAlignmentOutput = llm_base_1.LLMOutput;
/**
 * System prompt for topical alignment analysis.
 */
const SYSTEM_PROMPT = `You are a content analysis system that determines if text stays on topic.

BUSINESS SCOPE: {system_prompt_details}

Determine if the text stays within the defined business scope. Flag any content
that strays from the allowed topics.`;
/**
 * Topical alignment guardrail.
 *
 * Checks that the content stays within the defined business scope using
 * an LLM to analyze text against a defined context.
 */
exports.topicalAlignment = (0, llm_base_1.createLLMCheckFn)('Off Topic Prompts', 'Checks that the content stays within the defined business scope', SYSTEM_PROMPT, exports.TopicalAlignmentOutput, exports.TopicalAlignmentConfig);
//# sourceMappingURL=topical-alignment.js.map